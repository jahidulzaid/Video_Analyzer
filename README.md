# Video Vision Analyzer API

FastAPI service for GPT vision-based video understanding. Upload a video and receive a concise summary generated by the OpenAI.

## Setup

1. Install dependencies:
   ```bash
   pip install -r requirements.txt
   ```
2. Set your OpenAI API key (e.g., in `.env`):
   ```
   OPENAI_API_KEY=your_key_here
   ```
3. Run the server:
   ```bash
   uvicorn app.main:app --reload
   ```

## Usage

POST a video to the analyzer endpoint:
```bash
curl -X POST "http://localhost:8000/api/v1/video/analyze" \
  -H "accept: application/json" \
  -H "Content-Type: multipart/form-data" \
  -F "file=@/path/to/video.mp4" \
  -F "instruction=Summarize the main actions" \
  -F "frame_samples=24" \
  -F "seconds_per_frame=1.5"
```

The API samples frames densely based on video length (one frame per `seconds_per_frame`, min `frame_samples`, capped by `max_frame_samples`), forwards them to the OpenAI vision model, and returns a natural-language summary with metadata.

## Configuration

- `OPENAI_API_KEY`: required for the OpenAI client.
- `OPENAI_MODEL`: override via environment to change the model (defaults to `gpt-4.1-mini`).
- `FRAME_SAMPLES`: minimum frames to sample from each video (defaults to 20).
- `SECONDS_PER_FRAME`: target interval between samples; long videos collect more frames (defaults to 2.0s).
- `MAX_FRAME_SAMPLES`: upper bound on frames sent to the model to stay under payload limits (defaults to 120).
- `MAX_TOKENS`: cap the response size (defaults to 5000 for richer descriptions).

## Sample input/output

- Input: [sample_video.mp4](https://github.com/jahidulzaid/Video_Analyzer/raw/refs/heads/main/sample_video.mp4)
<video
  src="sample_video.mp4"
  controls
  autoplay
  muted
  loop
  playsinline
  width="800">
</video>

- Output: see `sample_Output.json` for the full JSON (summary, frame timestamps, model info, token caps). Example summary excerpt:
  ```
  "The video appears to be a highlight ... Nottingham Forest and Manchester City ... final result: Nottingham Forest 1, Manchester City 2."
  ```
- Note: run with MP4 to reproduce similar outputs
